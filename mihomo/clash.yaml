mixed-port: 7890

unified-delay: true
tcp-concurrent: true

allow-lan: true
mode: rule
log-level: info
ipv6: true
udp: true

external-controller: 0.0.0.0:9090

# 锚点 - 节点订阅的参数 [每12小时更新一次订阅节点，每 60 秒一次健康检查]
NodeParam:
  &NodeParam {
    type: http,
    interval: 43200,
    health-check:
      {
        enable: true,
        url: "http://cp.cloudflare.com/generate_204",
        interval: 60,
      },
  }

# 锚点 - 节点订阅
proxy-providers:
  我的节点:
    url: ""
    <<: *NodeParam
    path: "./proxy_provider/Providers.yaml"

# 锚点 - 节点筛选组
Filter: &Filter "*"

# 策略组参数锚点
# 锚点 - 故障转移参数 [每 10 秒一次惰性健康检查，时延超过 2 秒判定为失败，失败 3 次则自动触发健康检查]
FallBack:
  &FallBack {
    type: load-balance,
    interval: 10,
    lazy: true,
    url: "http://www.google.com/generate_204",
    disable-udp: false,
    timeout: 2000,
    max-failed-times: 3,
    hidden: false,
    include-all-providers: true,
    strategy: consistent-hashing,
  }

# 策略组
proxy-groups:
  - { name: Proxy, type: select, proxies: [Nodes] }
  - { name: Nodes, <<: *FallBack, filter: *Filter }

# 分流规则指向
rules:
  - MATCH,Proxy
